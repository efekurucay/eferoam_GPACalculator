{% extends "base.html" %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-edit me-2"></i>Not Güncelleme - {{ course.name }}
                </h5>
            </div>
            <div class="card-body">
                <form method="POST">
                    <div class="row mb-4">
                        <div class="col-md-4">
                            <div class="card bg-light">
                                <div class="card-body text-center">
                                    <h6 class="card-subtitle mb-2 text-muted">
                                        <i class="fas fa-percent me-2"></i>Vize Yüzdesi
                                    </h6>
                                    <h4 class="mb-0">{{ course.midterm_percentage }}%</h4>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card bg-light">
                                <div class="card-body text-center">
                                    <h6 class="card-subtitle mb-2 text-muted">
                                        <i class="fas fa-percent me-2"></i>Diğer Yüzdesi
                                    </h6>
                                    <h4 class="mb-0">{{ course.others_percentage }}%</h4>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card bg-light">
                                <div class="card-body text-center">
                                    <h6 class="card-subtitle mb-2 text-muted">
                                        <i class="fas fa-percent me-2"></i>Final Yüzdesi
                                    </h6>
                                    <h4 class="mb-0">{{ course.final_percentage }}%</h4>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row g-3">
                        <div class="col-md-4">
                            <div class="form-floating">
                                <input type="number" class="form-control" id="midterm_grade" name="midterm_grade"
                                       value="{{ course.midterm_grade if course.midterm_grade }}" step="0.01" min="0" max="100">
                                <label for="midterm_grade">
                                    <i class="fas fa-pen me-2"></i>Vize Notu
                                </label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-floating">
                                <input type="number" class="form-control" id="others_grade" name="others_grade"
                                       value="{{ course.others_grade if course.others_grade }}" step="0.01" min="0" max="100">
                                <label for="others_grade">
                                    <i class="fas fa-tasks me-2"></i>Diğer Not
                                </label>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-floating">
                                <input type="number" class="form-control" id="final_grade" name="final_grade"
                                       value="{{ course.final_grade if course.final_grade }}" step="0.01" min="0" max="100">
                                <label for="final_grade">
                                    <i class="fas fa-flag-checkered me-2"></i>Final Notu
                                </label>
                            </div>
                        </div>
                    </div>

                    {% if course.total_grade %}
                    <div class="row mt-4">
                        <div class="col-md-4">
                            <div class="card bg-primary text-white">
                                <div class="card-body text-center">
                                    <h6 class="card-subtitle mb-2">
                                        <i class="fas fa-calculator me-2"></i>Toplam Not
                                    </h6>
                                    <h3 class="mb-0">{{ "%.2f"|format(course.total_grade) }}</h3>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card {% if course.grade in ['AA', 'BA', 'BB'] %}bg-success
                                          {% elif course.grade in ['CB', 'CC'] %}bg-info
                                          {% elif course.grade in ['DC', 'DD'] %}bg-warning
                                          {% else %}bg-danger{% endif %} text-white">
                                <div class="card-body text-center">
                                    <h6 class="card-subtitle mb-2">
                                        <i class="fas fa-star me-2"></i>Harf Notu
                                    </h6>
                                    <h3 class="mb-0">{{ course.grade }}</h3>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="card bg-primary text-white">
                                <div class="card-body text-center">
                                    <h6 class="card-subtitle mb-2">
                                        <i class="fas fa-chart-bar me-2"></i>Katkı Puanı
                                    </h6>
                                    <h3 class="mb-0">{{ "%.2f"|format(course.contribution_point) }}</h3>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endif %}

                    <div class="d-flex justify-content-between mt-4">
                        <a href="{{ url_for('dashboard') }}" class="btn btn-secondary">
                            <i class="fas fa-arrow-left me-2"></i>Geri Dön
                        </a>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save me-2"></i>Notları Kaydet
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %} 